:root{
  --bg:#0b0b0b;
  --key-outline: rgba(255,255,255,0.24);
  --key-press: rgba(0,0,0,0.28);
  --radius: 16%;
  /* Initial defaults; overwritten by calibrator */
  --hit-w: 83.5%;
  --hit-h: 87%;
  --shift-y: 2.2%;
}

html,body{height:100%;}
body{
  margin:0; background:var(--bg); color:#fff;
  -webkit-text-size-adjust:100%;
  -webkit-user-select:none; user-select:none;
  touch-action: manipulation;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
}

.stage{
  position:fixed; inset:0;
  width:100vw; height:100vh;
  overflow:hidden; background:var(--bg);
}

.photo{
  position:absolute; left:50%; top:50%;
  transform: translate(-50%,-50%);
  width:auto; height:auto;
  max-width:100vw; max-height:100vh;
  object-fit: contain;
  pointer-events:none;
  display:block; z-index:1;
}

.overlay{
  position:absolute; z-index:2;
  display:grid;
  grid-template-columns: repeat(3, 1fr);
  grid-template-rows:   repeat(4, 1fr);
  /* padding/gaps set in JS (px) */
}

.key{
  position:relative; background:transparent;
  border:none; outline:none; border-radius: var(--radius);
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
}
.key::before{
  content:"";
  position:absolute; left:50%; top:50%;
  width: var(--hit-w); height: var(--hit-h);
  transform: translate(-50%, calc(-50% - var(--shift-y)));
  border-radius: var(--radius);
  box-shadow: 0 0 0 1px var(--key-outline) inset;
  background: rgba(255,255,255,0.06); /* guides ON in calibrator */
  pointer-events:none;
  transition: transform 60ms ease, background-color 60ms ease, box-shadow 120ms ease;
}
.key:active::before, .key.pressed::before{
  background: var(--key-press);
  transform: translate(-50%, calc(-50% - var(--shift-y))) scale(0.985);
  box-shadow: 0 0 0 2px rgba(255,255,255,0.4) inset;
}

.hud{
  position:absolute; left:50%; bottom:10px; transform:translateX(-50%);
  background: rgba(0,0,0,0.6); padding:6px 10px; border-radius:10px;
  font-size:12px; z-index:3; opacity:0.9;
}

/* Calibrator panel */
.toggle{
  position: fixed; right: 10px; top: 10px; z-index: 5;
  background: #1f2937; color:#fff; border: none;
  border-radius: 8px; padding: 8px 10px; font-size: 14px;
}
.panel{
  position: fixed; right: 10px; top: 48px; z-index: 5;
  background: rgba(0,0,0,0.75);
  backdrop-filter: blur(6px);
  border: 1px solid rgba(255,255,255,0.15);
  border-radius: 10px; padding: 10px; width: 260px;
  font-size: 13px;
}
.panel .row{ display:flex; align-items:center; gap:8px; margin:6px 0; }
.panel label{ width: 90px; color:#cbd5e1; }
.panel input[type=range]{ flex:1; }
.panel span{ width: 46px; text-align:right; color:#e5e7eb; }
.panel .buttons{ justify-content: space-between; margin-top: 10px; }
.panel .note{ color:#9ca3af; margin-top:6px; font-size: 12px; }
